<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Track PO Dispatch</title>
</head>

<body>
    <h3>Track PO Dispatch</h3>
    <form method="post" action="/po/track" onsubmit="submitTrack(event)">
        <label>PO ID</label><input name="po_id" type="number" min="1" required />
        <label>Status Update</label><input name="status_update" placeholder="Dispatched / Delivered ..." required />
        <label>Comment</label><input name="comment" />
        <button type="submit">Update</button>
    </form>
    <pre id="result"></pre>
    <script>
        async function submitTrack(e) {
            e.preventDefault();
            const form = e.target;
            const payload = {
                po_id: parseInt(form.po_id.value),
                status_update: form.status_update.value,
                comment: form.comment.value
            };
            const r = await fetch('/po/track', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            document.getElementById('result').textContent = await r.text();
        }
    </script>
</body>

</html>